version: "3.7"

# For development and production-specific configuration,
# check out docker-compose.override.yml and docker-compose.prod.yml
# respectively.
services:
  api:
    restart: on-failure
    networks:
      - api-backend
      - api-frontend

  redis:
    image: redis:6-alpine
    restart: on-failure
    networks:
      - api-backend
    command: redis-server --save 120 1 --loglevel warning

  nginx:
    image: nginx:mainline-alpine
    restart: on-failure
    depends_on:
      - api
    networks:
      - api-frontend

networks:
  api-frontend:
    driver: bridge
  api-backend:
    driver: bridge
